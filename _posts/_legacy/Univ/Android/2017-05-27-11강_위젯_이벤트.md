---
layout: post
title: 11강.위젯이벤트_처리
categories: [Android]
tags: [Widget, Event, WidgetEvent]
fullview: true
comments: true
published: false
---
#### WidgetEvent
위젯(Button, TextView, ImageView 등등) 역시 View에 하위클래스 이므로 이므로 이벤트를 처리하는 방법은 동일하고 다수의 위젯에 동일한 이벤트를 붙힐 수 있는 방법이 존재한다. A라는 버튼의 이벤트와 B라는 이벤트의 동작 로직의 90%가 같다면 둘을 각 각 구현하는 것보다 같은 로직에서 서로 id를 구분해서 구현해주는 쪽이 훨씬 좋은 코드를 만들 수 있을 것 이다.
 > onClicklistener인터페이스를 구현하고, onClick() 메소드 안에서 클릭에 대한 처리 코드를 작성한다. ~~이러한 방법으로 구현하게 되면 하나의 리스너에 여러 View에 대해 등록하는 것이 허용되며 한 객체를 두번 사용하려면 이름이 반드시 필요하므로 익명 클래스의 임시 객체를 생성하는 방법을 쓸 수는 없음~~

```java
    public class MainActivity extends Activity implements View.OnClickListener{
        ...
        public void onCreate(Bundle savedInstanceState){
            //id를 통한 버튼 선언
            ...
            btnA.OnClickListener(this) ;
            btnB.OnClickListener(this) ;
        }
        ...
        public void onClick(view v) {
            ...
            switch(v.getId()){
                case R.id.btnB :
                ..
                case R.id.btnB :
                ..
            }
        }

    }
```
#### TimerEvent
타이머 이벤트는 특정 시간을 간격으로 함수를 주기적으로 실행하기 위한 타이머 이벤트입니다. 타 이벤트와는 다르게 프로그램 코드를 통해서 이벤트가 실행됩니다.

>다음은 1초마다 한 번씩 text값이 바뀌는 동작을 하는 코드 입니다

```java
int times = 0 ;
//타이머 실행
mHandler.sendEmptyMessage(0);
...

Handler mHandler = new Handler(){
    	public void handleMessage(Message msg){
    		times++;
    		mText.setText("time = " + times);
            //현재 코드 과정을 반복함  
    		mHandler.sendEmptyMessageDelayed(0, 1000);       
    	};
 };
```


#### 액티비티의 생명주기
액티비티는 것은 프로그램이 실행되는 환경의 단위로 안드로이드는 멀티태스킹을 지원하므로 여러 개의 응용프로그램을 동시에 실행 할 수 있으나 자원이 PC환경 보다 넉넉하지 않으므로 여러가지 제약이 따릅니다.

특히 메모리의 크기가 작고 화면도 작아 많은 프로그램을 동시에 실행 시키기에는 무리가 있습니다.

여러개의 프로그램이 동시에 실행되는 것 같지만 실제 사용자의 눈에 보이고 직접 사용하는 프로그램은 언제나 하나인데 사용자는 배경의 프로그램을 활성/비활성화함으로써 교대로 실행할 수 있습니다.

액티비티는  `시작-실행-활성-비활성화-정지-종료`되는 일련의 상태를 순환하는데 이것을 생명주기라고 합니다. 물론 활성 비활성 단계는 서로 반복 될 수 있습니다. 이러한 활성 비활성 단계는 `사용자의 선택`이나 `시스템의 자원사정`에 따라 액티비티의 상태는 끊임없이 바뀝니다.

>액티비티가 새롭게  생성되면 `스택`의 제일 위에 놓여 활성화됩니다.
이 상태에서 다른 액티비티가 또 생성되면 기존의 액티비티는 잠시 가려지고 새 액티비티가 스택의 제일 위에 배치됩니다. 스택 제일 위의 액티비티가 종료되면 바로 아래족에 있는 액티비티가 활성화되어 화면에 보임

이 처럼 시스템은 태스크의 실행중인 액티비티들을 스택으로 관리합니다.

#### 액티비티의 관리
스택 상의 액티비티는 **(실행/일시정지/정지)** 상태 중에 하나입니다.
1. 실행
 * 사용자가 직접사용하는 상태, 스택의 제일 위에 있으며 화면상에서도 역시 제일 위에 있음
2. 일시정지
 * 포커스는 잃었지만 사용자에게는 보이는 상태, 위 쪽에 다른 액티비티가 있지만 화면 전체를 다 가리지 않았거나 반투명한 경우가 이에 해당합니다. 살아 있는 상태와 같지만 시스템에 의해 강제로 종료 될 수 있습니다._자원확보_
3. 정지상태
 * 다른 액티비티에 의해 완전히 가려진 상태이며 사용자의 눈에 보이지 않습니다. 그러나 모든 정보를 유지하고 있으므로 언제든지 다시활성화 될 수 있는 상태입니다.
> 액티비티는 처음 생성되어 완전히 파괴될 때까지 여러 메소드들을 순서대로 거치게 됩니다. 일부는 생략될 수도 있고 활성화 상태가 자주 바뀌면 onPause와 onResume을 여러번 호출하기도 합니다.
